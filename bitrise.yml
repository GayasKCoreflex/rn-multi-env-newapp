---
format_version: '23'
default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git
project_type: react-native

workflows:
  dev:
    steps:
      - git-clone@8: {}
      - script@1:
          title: Run installandroid.js
          inputs:
            - content: |
                #!/bin/bash
                node ./installandroid.js
      - script@1:
          title: Build Dev APK
          inputs:
            - content: |
                #!/bin/bash
                node assembleConfig.js dev release
      - deploy-to-bitrise-io@2: {}

  uat:
    steps:
      - git-clone@8: {}
      - script@1:
          title: Run installandroid.js
          inputs:
            - content: |
                #!/bin/bash
                node ./installandroid.js
      - script@1:
          title: Build UAT APK
          inputs:
            - content: |
                #!/bin/bash
                node assembleConfig.js uat release
      - deploy-to-bitrise-io@2: {}

  prod:
    steps:
      - git-clone@8: {}
      - script@1:
          title: Run installandroid.js
          inputs:
            - content: |
                #!/bin/bash
                node ./installandroid.js
      - script@1:
          title: Build Prod APK
          inputs:
            - content: |
                #!/bin/bash
                node assembleConfig.js prod release
      - deploy-to-bitrise-io@2: {}

meta:
  bitrise.io:
    stack: osx-xcode-16.4.x  # macOS stack with latest Xcode
    machine_type_id: g2.mac.large  # Performance machine type